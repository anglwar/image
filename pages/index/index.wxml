<view class="container">
  <view class="card row space-between">
    <text class="muted">æœ¬æœˆæ”¯å‡º</text>
    <text class="title">{{monthTotal.toFixed(2)}} å…ƒ</text>
  </view>

  <view style="height: 24rpx"></view>

  <view class="row gap-24">
    <button class="btn-outline" bindtouchstart="onVoiceTouchStart" bindtouchend="onVoiceTouchEnd" bindlongpress="onVoiceLongPress" loading="{{isRecording}}">
      ğŸ™ï¸ é•¿æŒ‰è¯­éŸ³è¾“å…¥
    </button>
    <button class="btn-primary" bindtap="openManualPopup">âœï¸ æ‰‹åŠ¨è¾“å…¥</button>
  </view>

  <view style="height: 32rpx"></view>

  <view class="card">
    <view class="row space-between">
      <text class="title">ä»Šæ—¥è®°å½•</text>
      <text class="muted">{{todayDate}}</text>
    </view>
    <view style="height: 16rpx"></view>
    <block wx:if="{{todayList.length === 0}}">
      <text class="muted">æš‚æ— è®°å½•</text>
    </block>
    <block wx:for="{{todayList}}" wx:key="id">
      <view class="row space-between" style="padding: 16rpx 0; border-bottom: 1px solid #f0f0f0;">
        <view class="row" style="gap: 16rpx;">
          <text>{{item.category}}</text>
          <text class="muted">{{item.title}}</text>
        </view>
        <text style="color:#d93025;">-{{Number(item.amount).toFixed(2)}}</text>
      </view>
    </block>
  </view>

  <view wx:if="{{showManual}}" class="card" style="position: fixed; left: 24rpx; right: 24rpx; bottom: 160rpx; z-index: 1200;">
    <view class="row space-between">
      <text class="title">æ–°å¢æ”¯å‡º</text>
      <text bindtap="closeManualPopup">âœ–</text>
    </view>
    <view style="height: 16rpx"></view>
    <view>
      <view style="margin-bottom: 16rpx;">
        <text class="muted">é‡‘é¢ï¼ˆå…ƒï¼‰</text>
        <input placeholder="0.00" type="digit" value="{{form.amount}}" bindinput="onAmountInput" />
      </view>
      <view style="margin-bottom: 16rpx;">
        <text class="muted">æ ‡é¢˜</text>
        <input placeholder="å¦‚ï¼šåˆé¤" value="{{form.title}}" bindinput="onTitleInput" />
      </view>
      <view style="margin-bottom: 16rpx;">
        <text class="muted">æ—¶é—´</text>
        <picker mode="date" value="{{form.date}}" bindchange="onDateChange">
          <view>{{form.date}}</view>
        </picker>
      </view>
      <view style="margin-bottom: 16rpx;">
        <text class="muted">åˆ†ç±»</text>
        <picker range="{{categories}}" value="{{form.categoryIndex}}" bindchange="onCategoryChange">
          <view>{{categories[form.categoryIndex]}}</view>
        </picker>
      </view>
      <button class="btn-primary" bindtap="submitManual">ä¿å­˜</button>
    </view>
  </view>
</view>

